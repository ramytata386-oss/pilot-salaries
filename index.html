<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>اعرف قبضك</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; font-family: 'Cairo', sans-serif; }
    body {
      margin: 0; padding: 0; min-height: 100vh;
      background: radial-gradient(circle at top, #000000, #111827, #000);
      color: #fff; display: flex; flex-direction: column;
      align-items: center; justify-content: flex-start;
      overflow-x: hidden; position: relative;
    }

    /* شعار MTA */
    .logo-mta {
      margin-top: 30px;
      font-size: 3.4rem;
      font-weight: 900;
      letter-spacing: 3px;
      text-align: center;
      background: linear-gradient(90deg, #00eaff, #00b7ff, #38bdf8, #ffffff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 25px #00cfffaa, 0 0 45px #00cfff55;
      animation: glow 3s ease-in-out infinite alternate;
    }

    @keyframes glow {
      0% { text-shadow: 0 0 15px #00cfff55, 0 0 30px #00cfff33; }
      100% { text-shadow: 0 0 35px #00eaffcc, 0 0 65px #00eaff88; }
    }

    h1 {
      margin-top: 10px; /* تم تقليل المسافة لتناسب اللوجو */
      font-size: 3rem; font-weight: bold;
      background: linear-gradient(90deg, #00b7ff, #38bdf8, #fff);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px #00b7ff80;
    }

    .container {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(15px);
      border-radius: 25px; border: 2px solid #38bdf880;
      box-shadow: 0 0 30px #00b7ff33;
      padding: 40px 25px; width: 90%; max-width: 600px;
      margin-top: 30px; position: relative;
    }
    label { font-size: 1.4rem; font-weight: 700; display: block; margin-bottom: 14px; text-align: center; }
    input {
      width: 100%; padding: 18px; border-radius: 16px;
      border: 2px solid #00b7ff; font-size: 1.4rem;
      text-align: center; color: #111; background: #f8fafc;
      margin-bottom: 16px;
    }
    button {
      width: 100%; background: linear-gradient(90deg, #00b7ff, #38bdf8);
      color: white; border: none; padding: 16px; font-size: 1.3rem;
      font-weight: bold; border-radius: 14px; cursor: pointer;
    }

    table { width: 100%; border-collapse: separate; border-spacing: 0 8px; font-size: 1.3rem; }
    tr { cursor: pointer; }
    td { padding: 12px 10px; border-radius: 10px; background: rgba(255,255,255,0.08); }

    .net-box { margin-top: 35px; text-align: center; }
    .net-value {
      background: linear-gradient(90deg, #0077ff, #00b7ff);
      color: #fff; font-size: 2.7rem; font-weight: 900;
      border-radius: 20px; padding: 25px 0;
      box-shadow: 0 0 25px #00b7ffaa;
    }
    .net-label { margin-top: 12px; color: #b7e3ff; font-size: 1.3rem; font-weight: 700; }

    .loader-screen {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      z-index: 999; display: none;
    }

    .glass-loader {
      width: 140px; height: 140px;
      border-radius: 50%; position: relative;
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(20px);
      border: 4px solid rgba(255,255,255,0.15);
      box-shadow: inset 0 0 25px rgba(255,255,255,0.15),
                  0 0 25px #00b7ffaa,
                  0 0 50px #0088ff55;
      animation: rotate 1.6s linear infinite;
    }
    .glass-loader::before {
      content: "";
      position: absolute; inset: 0;
      border-radius: 50%;
      background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.25) 60%);
      filter: blur(4px);
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .success-check {
      font-size: 8rem;
      color: #00ffbf;
      text-shadow: 0 0 25px #00ffbfaa, 0 0 60px #00ffbf88;
      display: none;
      animation: checkPop 0.4s ease-out;
    }
    @keyframes checkPop {
      0% { transform: scale(0); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>

<body>

  <!-- شعار MTA -->
  <div class="logo-mta">MTA</div>

  <h1>اعرف قبضك</h1>

  <div class="loader-screen" id="loaderScreen">
    <div class="glass-loader" id="loader"></div>
    <div class="success-check" id="successCheck">✔</div>
  </div>

  <div class="container">
    <label for="riderId">ادخل Rider ID</label>
    <input type="text" id="riderId" placeholder="اكتب رقم الطيار هنا" />
    <button onclick="showSalary()">عرض التفاصيل</button>

    <div style="text-align:center; margin-top:10px; font-size:1rem; color:#b7e3ff;">Best regards, Rami Nassim</div>

    <div id="result"></div>

    <div class="net-box" id="netBox" style="display:none;">
      <div class="net-value" id="netValue">0 </div>
      <div class="net-label">صافي القبض الفعلي للطيار</div>
    </div>
  </div>

  <script>
    const sheetId = "1W1cwqjeAFG2zcdRUQJIgAP_0EKtF9bsBaJ5ROPgR-WU";
    const apiKey = "AIzaSyCsfH6MKhHCUTyVv8XmtBISqbw5FAwjo94";
    const range = "Sheet1";
    let salaries = {};

    async function fetchData() {
      const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`;
      const response = await fetch(url);
      const data = await response.json();
      const rows = data.values;
      const headers = rows[0];
      rows.slice(1).forEach(row => {
        let record = {};
        headers.forEach((header, i) => (record[header] = row[i]));
        salaries[record["Rider ID"]] = record;
      });
    }

    function showSalary() {
      const id = document.getElementById("riderId").value.trim();
      const resultDiv = document.getElementById("result");
      const netBox = document.getElementById("netBox");
      const netValue = document.getElementById("netValue");

      if (!salaries[id]) {
        resultDiv.innerHTML = "<div>❌ لا يوجد بيانات لهذا Rider ID</div>";
        resultDiv.style.display = "block";
        netBox.style.display = "none";
        return;
      }

      const loaderScreen = document.getElementById("loaderScreen");
      const loader = document.getElementById("loader");
      const successCheck = document.getElementById("successCheck");

      loaderScreen.style.display = "flex";
      loader.style.display = "block";
      successCheck.style.display = "none";

      setTimeout(() => {
        loader.style.display = "none";
        successCheck.style.display = "block";

        setTimeout(() => {
          loaderScreen.style.display = "none";

          let detailsHtml = '<table>';
          Object.entries(salaries[id]).forEach(([key, value]) => {
            if (key !== "Net Salary" && key !== "صافي القبض" && key !== "Rider ID") {
              detailsHtml += `
                <tr>
                  <td>${key}</td>
                  <td style='text-align:left; font-weight:900;'>${value}</td>
                </tr>`;
            }
          });
          detailsHtml += '</table>';

          resultDiv.innerHTML = detailsHtml;
          resultDiv.style.display = "block";

          const net = salaries[id]["Net Salary"] || salaries[id]["صافي القبض"] || salaries[id]["القبض الصافي"] || 0;
          netValue.innerHTML = `${net} جنيه`;
          netBox.style.display = "block";

        }, 900);
      }, 1000);
    }

    fetchData();
  </script>

</body>
</html>
